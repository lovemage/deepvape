        // é–‹å•Ÿiboné–€å¸‚æŸ¥è©¢ç³»çµ± - ä½¿ç”¨7-11å®˜æ–¹API
        function openIbonStoreMap() {
            // å»ºæ§‹å›èª¿URL
            const currentProtocol = window.location.protocol;
            const currentHost = window.location.host;
            
            // åˆ¤æ–·æ˜¯å¦ç‚ºæœ¬åœ°é–‹ç™¼ç’°å¢ƒ
            const isLocalhost = currentHost.includes('localhost') || currentHost.includes('127.0.0.1');
            
            // å¦‚æœæ˜¯æœ¬åœ°é–‹ç™¼ç’°å¢ƒï¼Œé¡¯ç¤ºè­¦å‘Š
            if (isLocalhost) {
                alert('âš ï¸ æ³¨æ„ï¼šæ‚¨ç›®å‰åœ¨æœ¬åœ°é–‹ç™¼ç’°å¢ƒã€‚\n\n7-11é–€å¸‚é¸æ“‡APIéœ€è¦æœ‰æ•ˆçš„ç·šä¸Šcallback URLæ‰èƒ½æ­£å¸¸é‹ä½œã€‚\n\nå»ºè­°å°‡ç¶²ç«™éƒ¨ç½²åˆ°ç·šä¸Šç’°å¢ƒé€²è¡Œæ¸¬è©¦ã€‚');
            }
            
            // ä½¿ç”¨ç°¡æ½”çš„ API è·¯å¾‘ï¼ˆé¿å… .netlify å­—æ¨£ï¼‰
            let callbackUrl;
            if (isLocalhost) {
                // é–‹ç™¼ç’°å¢ƒï¼šä½¿ç”¨å¯¦éš›éƒ¨ç½²çš„ç¶²å€
                callbackUrl = 'https://deepvape.org/api/cvs-callback';
                console.warn('é–‹ç™¼ç’°å¢ƒåµæ¸¬ï¼šä½¿ç”¨ç”Ÿç”¢ç’°å¢ƒ API URL');
            } else {
                // ç”Ÿç”¢ç’°å¢ƒï¼šä½¿ç”¨ç•¶å‰ç¶²å€çš„ API è·¯å¾‘
                callbackUrl = `${currentProtocol}//${currentHost}/api/cvs-callback`;
            }
            
            // 7-11 é›»å­åœ°åœ– API URL
            const eshopId = '870'; // æ‚¨çš„å» å•†ä»£ç¢¼
            const serviceType = '1'; // æœå‹™é¡å‹ï¼š1=å–è²¨ä»˜æ¬¾
            const apiUrl = `https://emap.presco.com.tw/c2cemap.ashx?eshopid=${eshopId}&servicetype=${serviceType}&url=${encodeURIComponent(callbackUrl)}`;
            
            console.log('é–‹å•Ÿ7-11é›»å­åœ°åœ–API:', apiUrl);
            console.log('å›èª¿URL:', callbackUrl);
            console.log('ç’°å¢ƒ:', isLocalhost ? 'é–‹ç™¼ç’°å¢ƒ' : 'ç”Ÿç”¢ç’°å¢ƒ');
            
            // é–‹å•Ÿæ–°è¦–çª—
            const mapWindow = window.open(apiUrl, 'SevenElevenStoreMap', 'width=1000,height=700,scrollbars=yes,resizable=yes');
            
            if (!mapWindow) {
                alert('ç„¡æ³•é–‹å•Ÿé–€å¸‚æŸ¥è©¢è¦–çª—ï¼Œè«‹æª¢æŸ¥ç€è¦½å™¨çš„å½ˆå‡ºè¦–çª—è¨­å®šã€‚');
                return;
            }
            
            // é¡¯ç¤ºä½¿ç”¨æŒ‡å¼•
            alert('ğŸ“ 7-ELEVEN é–€å¸‚æŸ¥è©¢èªªæ˜ï¼š\n\n' +
                  '1. åœ¨åœ°åœ–ä¸Šé¸æ“‡æ‚¨è¦å–è²¨çš„é–€å¸‚\n' +
                  '2. é»æ“Šã€Œç¢ºèªã€æŒ‰éˆ•\n' +
                  '3. ç³»çµ±å°‡è‡ªå‹•å›å‚³é–€å¸‚è³‡è¨Š\n\n' +
                  'âš ï¸ æ³¨æ„äº‹é …ï¼š\n' +
                  '- è«‹ç¢ºä¿å…è¨±å½ˆå‡ºè¦–çª—\n' +
                  '- é¸æ“‡é–€å¸‚å¾Œç³»çµ±æœƒè‡ªå‹•å¡«å…¥è³‡è¨Š\n' +
                  '- å¦‚æœè‡ªå‹•å¡«å…¥å¤±æ•—ï¼Œæ‚¨ä»å¯æ‰‹å‹•è¼¸å…¥é–€å¸‚è³‡è¨Š');
        }
