# 🏪 門市選擇系統使用指南

## 🎯 系統概述

購物車頁面的門市選擇系統已升級為**縣市-區域**選擇模式，讓客戶能更直觀、更快速地找到附近的便利商店門市。

## 🛠️ 功能特色

### 1. **分層式選擇**
- **第一步**: 選擇便利商店類型 (7-11 或全家)
- **第二步**: 選擇縣市
- **第三步**: 選擇區域
- **第四步**: 自動顯示該區域所有門市 + 可選關鍵字篩選

### 2. **智能化篩選**
- 根據選擇的便利商店類型動態載入門市資料
- 縣市選擇後自動載入該縣市的所有區域
- 區域選擇後立即顯示該區域所有門市
- 支持額外的關鍵字搜尋縮小範圍

### 3. **用戶友好體驗**
- 清晰的步驟指引
- 實時搜尋結果統計
- 響應式設計，支援手機和桌面
- 直觀的門市資訊展示

## 📱 使用流程

### 客戶操作步驟

1. **選擇便利商店類型**
   ```
   點擊 [7-11] 或 [全家] 按鈕
   → 系統載入對應的門市資料
   ```

2. **選擇縣市**
   ```
   下拉選單 → 選擇所在縣市
   → 自動載入該縣市的所有區域
   ```

3. **選擇區域**
   ```
   下拉選單 → 選擇所在區域
   → 自動顯示該區域所有門市
   ```

4. **選擇門市 (可選：縮小範圍)**
   ```
   - 直接從顯示的門市列表中選擇
   - 或輸入店名/店號關鍵字進一步篩選
   ```

5. **確認選擇**
   ```
   點擊門市 → 自動填入門市資訊 → 完成
   ```

## 🎨 界面設計

### **選擇器佈局**
```
┌─────────────────────────────────────┐
│  [7-11]     [全家]                 │  ← 便利商店類型選擇
├─────────────────────────────────────┤
│  縣市: [請選擇縣市 ▼]              │  ← 縣市下拉選單
│  區域: [請選擇區域 ▼]              │  ← 區域下拉選單
├─────────────────────────────────────┤
│  [店名或店號關鍵字] [查詢門市]      │  ← 可選關鍵字搜尋
└─────────────────────────────────────┘
```

### **搜尋結果顯示**
```
┌─────────────────────────────────────┐
│  🎯 搜尋結果                       │
│  在 台北市大安區 找到 15 家門市      │
├─────────────────────────────────────┤
│  📍 7-ELEVEN 大安門市              │
│  📍 台北市大安區復興南路一段123號    │
│  🏷️ 店號: A001                    │
├─────────────────────────────────────┤
│  📍 7-ELEVEN 信義門市              │
│  📍 台北市大安區信義路四段456號      │
│  🏷️ 店號: A002                    │
└─────────────────────────────────────┘
```

## 💻 技術實現

### **前端功能**
- **動態資料載入**: 根據選擇的便利商店類型載入對應 JSON 檔案
- **分層篩選**: 縣市 → 區域 → 門市的階層式篩選
- **即時搜尋**: 選擇區域後立即顯示門市，無需手動搜尋
- **關鍵字增強**: 可選的關鍵字搜尋進一步縮小範圍

### **資料結構**
```javascript
// 門市資料結構
{
  "id": "A001",
  "name": "7-ELEVEN 大安門市",
  "city": "台北市",
  "district": "大安區", 
  "address": "台北市大安區復興南路一段123號",
  "phone": "02-2345-6789",
  "type": "711"
}
```

### **核心函數**
- `loadStoreDataAndPopulateCities()`: 載入門市資料並填充縣市選單
- `onCityChange()`: 縣市變更處理，載入區域選單
- `onDistrictChange()`: 區域變更處理，自動顯示門市
- `searchStores()`: 關鍵字搜尋門市
- `displayStoreResults()`: 顯示搜尋結果

## 📊 效能優化

### **資料載入**
- 只在選擇便利商店類型時載入一次資料
- 使用記憶體快取避免重複載入
- 分層篩選減少處理的資料量

### **用戶體驗**
- 即時反應，無需等待
- 清楚的載入狀態指示
- 智能的錯誤處理和提示

## 🔧 系統配置

### **支援的便利商店**
- **7-ELEVEN**: `cart_stores_711.json` (約 6,000+ 門市)
- **全家便利商店**: `cart_stores_family.json` (約 3,000+ 門市)

### **覆蓋地區**
- 台灣本島所有縣市
- 澎湖、金門、馬祖等離島地區

### **資料更新**
- 門市資料定期從官方 API 爬取更新
- 確保資訊的準確性和即時性

## 📱 響應式設計

### **桌面版** (>768px)
- 縣市和區域選單並排顯示
- 關鍵字搜尋框和按鈕並排

### **手機版** (≤768px)
- 縣市和區域選單縱向排列
- 關鍵字搜尋框和按鈕縱向排列
- 更大的觸控目標

## 🎯 優勢分析

### **vs 舊版關鍵字搜尋**
| 項目 | 舊版 | 新版 |
|-----|------|------|
| 操作難度 | 需要知道店名或店號 | 直觀的地理位置選擇 |
| 搜尋效率 | 可能找不到或找到過多結果 | 精確的地區篩選 |
| 用戶體驗 | 需要多次嘗試 | 一次到位 |
| 覆蓋範圍 | 依賴用戶輸入準確性 | 完整地區覆蓋 |

### **用戶體驗提升**
- ✅ **降低操作門檻**: 不需要記住店名或店號
- ✅ **提高搜尋精度**: 地理位置精確定位
- ✅ **減少選擇困難**: 分步驟引導選擇
- ✅ **提升轉換率**: 更容易完成門市選擇

## 🚀 未來規劃

### **短期優化**
- [ ] 增加門市距離顯示
- [ ] 支援 GPS 定位自動選擇最近區域
- [ ] 加入門市營業時間顯示

### **長期發展**
- [ ] 整合地圖顯示
- [ ] 支援更多便利商店品牌
- [ ] 加入門市服務項目篩選

---

**最後更新**: 2025年6月10日  
**系統版本**: v2.0  
**適用頁面**: cart.html 