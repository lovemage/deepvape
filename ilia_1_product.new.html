<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ILIA 一代主機 - DeepVape</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    
    <!-- 統一CSS架構 -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/deepvape-unified.css">
    <link rel="stylesheet" href="css/variant-selector.css">
    <link rel="stylesheet" href="css/product-page-unified.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <!-- 產品主題 -->
    <style>
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
        }
    </style>
</head>
<body class="theme-theme-ilia">
    <!-- 統一導航列 -->
    <header>
        <div class="header-container">
            <div class="header-actions">
                <button class="back-button" onclick="window.history.back()">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>
            
            <div class="logo">
                <a href="index.html" class="logo-button">
                    <img src="deepvape_logo_main.png" alt="DeepVape Logo" style="height: 50px; width: auto; object-fit: contain; border-radius: 10px; border: 1px solid rgba(26, 254, 73, 0.3);">
                    <span class="logo-text">DeepVape</span>
                </a>
            </div>
            
            <div class="header-actions">
                <button class="cart-button" onclick="window.location.href='cart.html'">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- 主要內容 -->
    <main class="main-content">
        <div class="container">
            <div class="content-wrapper">
                <!-- 產品標題區 -->
                <section class="product-header">
                    <h1 class="product-title">ILIA 一代主機</h1>
                    <p class="product-subtitle">高品質電子煙設備，卓越體驗之選</p>
                    <div class="price" id="productPrice">NT$ 450</div>
                    <div class="stock-status in-stock" id="stockStatus">
                        <i class="fas fa-check-circle"></i>
                        <span>現貨供應</span>
                    </div>
                </section>

                <!-- 產品展示區 -->
                <section class="product-showcase">
                    <div class="product-image">
                        <img src="ilia_1/ilia_gen1_main_device.jpg" alt="ILIA 一代主機" id="productImage">
                    </div>
                    
                    <div class="product-info">
                        <ul class="feature-list">
                            <li>功率
                        7W~8W</li>
                            <li>電池容量
                        450mAH</li>
                            <li>充電規格
                        TYPE-C 5V/1A</li>
                            <li>材質
                        通用一代煙彈產品</li>
                            <li>保固
                        購買起三天內非人為損壞</li>
                            <li>優質建構設計與功能性能</li>
                        </ul>
                    </div>
                </section>

                <!-- 產品規格 -->
                <section class="specifications">
                    <h3 class="spec-title">產品規格</h3>
                    <ul class="spec-list">
                        
                        <li>
                            <span class="spec-label">產品類型</span>
                            <span class="spec-value">電子煙產品</span>
                        </li>
                        <li>
                            <span class="spec-label">適用年齡</span>
                            <span class="spec-value">18歲以上成人</span>
                        </li>
                        <li>
                            <span class="spec-label">保固期間</span>
                            <span class="spec-value">6個月</span>
                        </li>
                        <li>
                            <span class="spec-label">產地</span>
                            <span class="spec-value">台灣</span>
                        </li>
                    </ul>
                </section>

                <!-- 統一變數選擇器 -->
                <section class="dv-variant-selector" id="variantContainer">
                    <!-- 變數選擇器將由 JavaScript 動態生成 -->
                </section>

                <!-- 產品亮點 -->
                <section class="product-highlights">
                    <div class="highlights-grid">
                        
                        <div class="highlight-card">
                            <h4>優質體驗</h4>
                            <p>精心設計的產品，帶來卓越的使用體驗</p>
                        </div>
                        <div class="highlight-card">
                            <h4>安全可靠</h4>
                            <p>通過嚴格品質檢測，確保產品安全性</p>
                        </div>
                        <div class="highlight-card">
                            <h4>專業服務</h4>
                            <p>提供完整的售前售後服務支援</p>
                        </div>
                    </div>
                </section>

                <!-- 購買控制區 -->
                <section class="purchase-section">
                    <div class="quantity-control">
                        <label class="quantity-label">數量：</label>
                        <button class="quantity-btn" onclick="changeQuantity(-1)">-</button>
                        <input type="number" class="quantity-input" id="quantity" value="1" min="1" max="10">
                        <button class="quantity-btn" onclick="changeQuantity(1)">+</button>
                    </div>
                    
                    <button class="add-to-cart-btn" id="addToCartBtn" onclick="addToCart()">
                        <i class="fas fa-shopping-cart"></i>
                        加入購物車
                    </button>
                    
                    <div class="warning-notice">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>本產品為18歲以上成人專用，未成年請勿購買使用</span>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- 統一頁腳 -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>關於 Deepvape</h3>
                <ul>
                    <li><a href="brand_story.html">品牌故事</a></li>
                    <li><a href="#">最新消息</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>客戶服務</h3>
                <ul>
                    <li><a href="shopping_guide.html">購物說明</a></li>
                    <li><a href="shipping_info.html">運送方式</a></li>
                    <li><a href="return_policy.html">退換貨政策</a></li>
                    <li><a href="faq.html">常見問題</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>聯絡我們</h3>
                <ul id="contactInfo">
                    <li><i class="fab fa-line"></i> LINE ID：<span id="lineId">@deepvape</span></li>
                    <li><i class="fas fa-envelope"></i> Email：<span id="email">service@deepvape.com</span></li>
                    <li><i class="fas fa-clock"></i> 服務時間：<span id="serviceHours">週一至週五 10:00-18:00</span></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>關注我們</h3>
                <p>追蹤最新優惠與新品資訊</p>
                <div style="margin-top: 1rem;">
                    <a href="#" id="facebookLink" style="margin-right: 1rem;"><i class="fab fa-facebook fa-2x"></i></a>
                    <a href="#" id="instagramLink" style="margin-right: 1rem;"><i class="fab fa-instagram fa-2x"></i></a>
                    <a href="#" id="telegramLink"><i class="fab fa-telegram fa-2x"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 Deepvape. All rights reserved. | 本網站僅供18歲以上成年人瀏覽</p>
            <p>警告：吸菸有害健康</p>
        </div>
    </footer>

    <!-- 購物車成功訊息 -->
    <div class="cart-success-msg" id="cartSuccessMsg">
        <i class="fas fa-check-circle"></i>
        <span>商品已加入購物車！</span>
    </div>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script src="js/product-manager.js"></script>
    <script src="js/variant-selector.js"></script>
    <script src="js/page-product-manager.js"></script>
    <script src="js/cart-animation.js"></script>
    <script src="js/price-sync.js"></script>
    <script src="js/stock-checker.js"></script>
    
    <!-- 產品特定配置 -->
    <script>
        // 產品配置將由生成器替換
        const productConfig =             {
                      "pageId": "ilia_1_product",
                      "productName": "ILIA 一代主機",
                      "price": 450,
                      "originalPrice": null,
                      "discount": null,
                      "variants": [
                                {
                                          "id": "ilia_gen1_black_white",
                                          "name": "顏色",
                                          "type": "color",
                                          "value": "初雪白",
                                          "stock": 40,
                                          "priceModifier": 0,
                                          "image": "ilia_1/ilia_gen1_main_device.jpg",
                                          "sku": "ILIA-GEN1-BW"
                                },
                                {
                                          "id": "ilia_gen1_blue_silver",
                                          "name": "顏色",
                                          "type": "color",
                                          "value": "夢幻紫金",
                                          "stock": 35,
                                          "priceModifier": 0,
                                          "image": "ilia_1/ilia_gen1_main_device.jpg",
                                          "sku": "ILIA-GEN1-BS"
                                },
                                {
                                          "id": "ilia_gen1_sky_blue",
                                          "name": "顏色",
                                          "type": "color",
                                          "value": "天空之境",
                                          "stock": 30,
                                          "priceModifier": 0,
                                          "image": "ilia_1/ilia_gen1_main_device.jpg",
                                          "sku": "ILIA-GEN1-SKY"
                                },
                                {
                                          "id": "ilia_gen1_green_red",
                                          "name": "顏色",
                                          "type": "color",
                                          "value": "寶寶粉",
                                          "stock": 25,
                                          "priceModifier": 0,
                                          "image": "ilia_1/ilia_gen1_main_device.jpg",
                                          "sku": "ILIA-GEN1-GR"
                                },
                                {
                                          "id": "ilia_gen1_green_green",
                                          "name": "顏色",
                                          "type": "color",
                                          "value": "寶寶藍",
                                          "stock": 20,
                                          "priceModifier": 0,
                                          "image": "ilia_1/ilia_gen1_main_device.jpg",
                                          "sku": "ILIA-GEN1-GGG"
                                },
                                {
                                          "id": "ilia_gen1_purple_purple",
                                          "name": "顏色",
                                          "type": "color",
                                          "value": "星辰銀灰",
                                          "stock": 22,
                                          "priceModifier": 0,
                                          "image": "ilia_1/ilia_gen1_main_device.jpg",
                                          "sku": "ILIA-GEN1-PP"
                                },
                                {
                                          "id": "ilia_gen1_orange_gray_red",
                                          "name": "顏色",
                                          "type": "color",
                                          "value": "櫻落金粉",
                                          "stock": 18,
                                          "priceModifier": 0,
                                          "image": "ilia_1/ilia_gen1_main_device.jpg",
                                          "sku": "ILIA-GEN1-OGR"
                                },
                                {
                                          "id": "ilia_gen1_orange_purple_red",
                                          "name": "顏色",
                                          "type": "color",
                                          "value": "黎霧青山",
                                          "stock": 15,
                                          "priceModifier": 0,
                                          "image": "ilia_1/ilia_gen1_main_device.jpg",
                                          "sku": "ILIA-GEN1-OPR"
                                },
                                {
                                          "id": "ilia_gen1_black_red",
                                          "name": "顏色",
                                          "type": "color",
                                          "value": "黑騎士",
                                          "stock": 28,
                                          "priceModifier": 0,
                                          "image": "ilia_1/ilia_gen1_main_device.jpg",
                                          "sku": "ILIA-GEN1-BR"
                                }
                      ],
                      "status": "active",
                      "lastUpdated": "2024-01-15T10:00:00.000Z"
            };
        
        // 初始化產品頁面
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化產品管理器
            if (typeof ProductManager !== 'undefined') {
                window.ProductManager = new ProductManager();
                window.ProductManager.init().then(() => {
                    console.log('✅ ProductManager 已初始化');
                    
                    // 初始化變數選擇器
                    if (productConfig.pageId) {
                        window.variantSelector = new VariantSelector(productConfig.pageId, 'variantContainer');
                        console.log('✅ 變數選擇器已初始化');
                    }
                });
            }
            
            // 初始化頁面產品管理器
            if (typeof PageProductManager !== 'undefined' && productConfig.pageId) {
                const pageManager = new PageProductManager();
                pageManager.init(productConfig.pageId);
            }
            
            // 更新購物車計數
            updateCartCount();
        });

        // 數量控制
        function changeQuantity(delta) {
            const quantityInput = document.getElementById('quantity');
            const currentValue = parseInt(quantityInput.value);
            const newValue = Math.max(1, Math.min(10, currentValue + delta));
            quantityInput.value = newValue;
        }

        // 獲取選中的變數
        function getSelectedVariant() {
            if (window.variantSelector) {
                return window.variantSelector.getSelectedVariant();
            }
            return null;
        }

        // 加入購物車
        function addToCart() {
            const selectedVariant = getSelectedVariant();
            const quantity = parseInt(document.getElementById('quantity').value);
            
            if (!selectedVariant) {
                alert('請選擇產品規格');
                return;
            }
            
            // 加入購物車邏輯
            const cartItem = {
                id: productConfig.pageId,
                name: productConfig.productName,
                variant: selectedVariant,
                quantity: quantity,
                price: selectedVariant.price || productConfig.price
            };
            
            addItemToCart(cartItem);
            showCartSuccessMessage();
        }

        // 添加商品到購物車
        function addItemToCart(item) {
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            
            // 檢查是否已存在相同商品和變數
            const existingIndex = cart.findIndex(cartItem => 
                cartItem.id === item.id && 
                cartItem.variant && item.variant &&
                cartItem.variant.id === item.variant.id
            );
            
            if (existingIndex > -1) {
                // 增加數量
                cart[existingIndex].quantity += item.quantity;
            } else {
                // 添加新商品
                cart.push(item);
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        }

        // 顯示購物車成功訊息
        function showCartSuccessMessage() {
            const msg = document.getElementById('cartSuccessMsg');
            msg.classList.add('show');
            setTimeout(() => {
                msg.classList.remove('show');
            }, 3000);
        }

        // 更新購物車計數
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }
    </script>
</body>
</html> 