<!DOCTYPE html>
<html>
<head>
    <title>APIé‡‘é‘°é©—è­‰å·¥å…·</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .test-box { margin: 15px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background: #d4edda; border-color: #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border-color: #f5c6cb; color: #721c24; }
        .warning { background: #fff3cd; border-color: #ffeaa7; color: #856404; }
        .info { background: #d1ecf1; border-color: #bee5eb; color: #0c5460; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
        .code { background: #f8f9fa; padding: 10px; border-radius: 5px; font-family: monospace; margin: 10px 0; }
        pre { white-space: pre-wrap; word-wrap: break-word; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”‘ Google Maps APIé‡‘é‘°é©—è­‰å·¥å…·</h1>
        
        <div class="test-box info">
            <h3>ğŸ“Š æ¸¬è©¦é€²åº¦</h3>
            <div id="progress">æº–å‚™æ¸¬è©¦...</div>
        </div>
        
        <div class="test-box">
            <h3>ğŸ§ª æ¸¬è©¦é …ç›®</h3>
            <button onclick="testAPIKey()">1. æ¸¬è©¦APIé‡‘é‘°æ ¼å¼</button>
            <button onclick="testMapsAPI()">2. æ¸¬è©¦Maps API</button>
            <button onclick="testPlacesAPI()">3. æ¸¬è©¦Places API</button>
            <button onclick="testGeocodingAPI()">4. æ¸¬è©¦Geocoding API</button>
            <button onclick="runAllTests()">ğŸš€ åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦</button>
        </div>
        
        <div id="results"></div>
        
        <div class="test-box">
            <h3>ğŸ”§ APIé‡‘é‘°è³‡è¨Š</h3>
            <div class="code">
                <strong>ç•¶å‰APIé‡‘é‘°:</strong> AIzaSyDG6TOXf2AXyGCHvfUWQZD3ZdP6dHd8c2g<br>
                <strong>æ¸¬è©¦ç¶²å€:</strong> <span id="currentUrl"></span><br>
                <strong>æ™‚é–“:</strong> <span id="currentTime"></span>
            </div>
        </div>
        
        <div class="test-box warning">
            <h3>âš ï¸ å¸¸è¦‹å•é¡Œè§£æ±º</h3>
            <p><strong>å¦‚æœèªè­‰å¤±æ•—ï¼Œè«‹æª¢æŸ¥:</strong></p>
            <ol>
                <li><strong>APIå·²å•Ÿç”¨:</strong> Maps JavaScript API, Places API, Geocoding API</li>
                <li><strong>è¨ˆè²»å¸³æˆ¶:</strong> å°ˆæ¡ˆå¿…é ˆé€£çµæœ‰æ•ˆçš„è¨ˆè²»å¸³æˆ¶</li>
                <li><strong>APIé™åˆ¶:</strong> æš«æ™‚è¨­ç‚º"None"é€²è¡Œæ¸¬è©¦</li>
                <li><strong>é…é¡é™åˆ¶:</strong> æª¢æŸ¥æ¯æ—¥ä½¿ç”¨é‡æ˜¯å¦è¶…é™</li>
            </ol>
        </div>
    </div>

    <script>
        const API_KEY = 'AIzaSyDG6TOXf2AXyGCHvfUWQZD3ZdP6dHd8c2g';
        
        // æ›´æ–°é é¢è³‡è¨Š
        document.getElementById('currentUrl').textContent = window.location.href;
        document.getElementById('currentTime').textContent = new Date().toLocaleString();
        
        function updateProgress(message) {
            document.getElementById('progress').innerHTML = message;
        }
        
        function addResult(title, status, details) {
            const results = document.getElementById('results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-box ${status}`;
            resultDiv.innerHTML = `
                <h4>${title}</h4>
                <div>${details}</div>
            `;
            results.appendChild(resultDiv);
        }
        
        function testAPIKey() {
            updateProgress('ğŸ” æª¢æŸ¥APIé‡‘é‘°æ ¼å¼...');
            
            if (!API_KEY) {
                addResult('âŒ APIé‡‘é‘°æ ¼å¼æª¢æŸ¥', 'error', 'APIé‡‘é‘°ç‚ºç©º');
                return;
            }
            
            if (API_KEY.length !== 39) {
                addResult('âš ï¸ APIé‡‘é‘°æ ¼å¼æª¢æŸ¥', 'warning', `APIé‡‘é‘°é•·åº¦ä¸æ¨™æº–: ${API_KEY.length} (æ‡‰ç‚º39)`);
            } else {
                addResult('âœ… APIé‡‘é‘°æ ¼å¼æª¢æŸ¥', 'success', 'APIé‡‘é‘°æ ¼å¼æ­£ç¢º');
            }
            
            if (!API_KEY.startsWith('AIza')) {
                addResult('âš ï¸ APIé‡‘é‘°å‰ç¶´æª¢æŸ¥', 'warning', 'APIé‡‘é‘°æ‡‰ä»¥"AIza"é–‹é ­');
            } else {
                addResult('âœ… APIé‡‘é‘°å‰ç¶´æª¢æŸ¥', 'success', 'APIé‡‘é‘°å‰ç¶´æ­£ç¢º');
            }
        }
        
        async function testMapsAPI() {
            updateProgress('ğŸ—ºï¸ æ¸¬è©¦Maps JavaScript API...');
            
            try {
                const url = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}`;
                const response = await fetch(url);
                
                if (response.ok) {
                    const text = await response.text();
                    if (text.includes('Google Maps JavaScript API')) {
                        addResult('âœ… Maps JavaScript API', 'success', 'APIå›æ‡‰æ­£å¸¸');
                    } else if (text.includes('REQUEST_DENIED')) {
                        addResult('âŒ Maps JavaScript API', 'error', 'APIè«‹æ±‚è¢«æ‹’çµ• - æª¢æŸ¥APIé‡‘é‘°æ¬Šé™');
                    } else if (text.includes('INVALID_REQUEST')) {
                        addResult('âŒ Maps JavaScript API', 'error', 'ç„¡æ•ˆçš„APIè«‹æ±‚');
                    } else {
                        addResult('âš ï¸ Maps JavaScript API', 'warning', `æœªçŸ¥å›æ‡‰: ${text.substring(0, 100)}...`);
                    }
                } else {
                    addResult('âŒ Maps JavaScript API', 'error', `HTTPéŒ¯èª¤: ${response.status} ${response.statusText}`);
                }
            } catch (error) {
                addResult('âŒ Maps JavaScript API', 'error', `ç¶²è·¯éŒ¯èª¤: ${error.message}`);
            }
        }
        
        async function testPlacesAPI() {
            updateProgress('ğŸª æ¸¬è©¦Places API...');
            
            try {
                const url = `https://maps.googleapis.com/maps/api/place/textsearch/json?query=7-ELEVENå°åŒ—&key=${API_KEY}`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.status === 'OK') {
                    addResult('âœ… Places API', 'success', `æ‰¾åˆ° ${data.results.length} å€‹çµæœ`);
                } else if (data.status === 'REQUEST_DENIED') {
                    addResult('âŒ Places API', 'error', `è«‹æ±‚è¢«æ‹’çµ•: ${data.error_message || 'æ¬Šé™ä¸è¶³'}`);
                } else if (data.status === 'OVER_QUERY_LIMIT') {
                    addResult('âŒ Places API', 'error', 'è¶…éæŸ¥è©¢é™åˆ¶ - æª¢æŸ¥é…é¡');
                } else {
                    addResult('âš ï¸ Places API', 'warning', `ç‹€æ…‹: ${data.status}, è¨Šæ¯: ${data.error_message || 'æœªçŸ¥éŒ¯èª¤'}`);
                }
            } catch (error) {
                addResult('âŒ Places API', 'error', `CORS/ç¶²è·¯éŒ¯èª¤: ${error.message}`);
            }
        }
        
        async function testGeocodingAPI() {
            updateProgress('ğŸ“ æ¸¬è©¦Geocoding API...');
            
            try {
                const url = `https://maps.googleapis.com/maps/api/geocode/json?address=å°åŒ—101&key=${API_KEY}`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.status === 'OK') {
                    addResult('âœ… Geocoding API', 'success', `æˆåŠŸè½‰æ›åœ°å€: ${data.results[0].formatted_address}`);
                } else if (data.status === 'REQUEST_DENIED') {
                    addResult('âŒ Geocoding API', 'error', `è«‹æ±‚è¢«æ‹’çµ•: ${data.error_message || 'æ¬Šé™ä¸è¶³'}`);
                } else {
                    addResult('âš ï¸ Geocoding API', 'warning', `ç‹€æ…‹: ${data.status}, è¨Šæ¯: ${data.error_message || 'æœªçŸ¥éŒ¯èª¤'}`);
                }
            } catch (error) {
                addResult('âŒ Geocoding API', 'error', `CORS/ç¶²è·¯éŒ¯èª¤: ${error.message}`);
            }
        }
        
        async function runAllTests() {
            document.getElementById('results').innerHTML = '';
            updateProgress('ğŸš€ åŸ·è¡Œå®Œæ•´æ¸¬è©¦...');
            
            testAPIKey();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testMapsAPI();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testPlacesAPI();
            await new Promise(resolve => setTimeout(resolve, 500));
            
            await testGeocodingAPI();
            
            updateProgress('âœ… æ‰€æœ‰æ¸¬è©¦å®Œæˆï¼è«‹æŸ¥çœ‹çµæœ');
        }
        
        // é é¢è¼‰å…¥æ™‚è‡ªå‹•åŸ·è¡ŒåŸºæœ¬æª¢æŸ¥
        window.addEventListener('load', () => {
            setTimeout(testAPIKey, 1000);
        });
    </script>
</body>
</html> 